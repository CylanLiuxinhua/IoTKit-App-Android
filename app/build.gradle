apply plugin: 'com.android.application'

android {
    compileSdkVersion rootProject.ext.compileSdkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion

    defaultConfig {
        applicationId "com.cylan.jiafeigou"
        minSdkVersion rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion
        versionCode 1
        versionName "1.0"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    lintOptions {
        abortOnError false
    }

    dexOptions {
        jumboMode = true
    }
    sourceSets {
        main {
            jniLibs.srcDirs = ['libs']
        }
    }

}
apply plugin: 'com.neenbedankt.android-apt'


dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    testCompile rootProject.ext.junit
    testCompile rootProject.ext.robolectric
    compile rootProject.ext.appcompat
    compile rootProject.ext.butterknife
    compile rootProject.ext.rxAndroid
    compile rootProject.ext.ultra_ptr
    compile rootProject.ext.appSupport
    compile rootProject.ext.recyclerView
    apt rootProject.ext.apt
    compile rootProject.ext.glide
    compile rootProject.ext.glideSupport
    compile project(':jlib')
    compile files('libs/aliyun-oss-sdk-android-2.2.0.jar')
    compile files('libs/bugly_crash_release__2.1.jar')
    compile files('libs/gson-2.2.4.jar')
    compile files('libs/JfgAndroidSDK-2.0.86.jar')
    compile files('libs/mid-sdk-2.3.jar')
    compile files('libs/mta-android-stat-sdk-2.2.0.jar')
    compile files('libs/nineoldandroids-2.4.0.jar')
    compile files('libs/okhttp-3.2.0.jar')
    compile files('libs/okio-1.6.0.jar')
    compile files('libs/open_sdk_r5509_lite.jar')
    compile files('libs/SLog-2.0.jar')
    compile files('libs/weibosdkcore.jar')
    compile files('libs/zxing.jar')
}


android.applicationVariants.all { variant ->
    variant.outputs.each { output ->
        output.processManifest.doLast {
            def manifestOutFile = output.processManifest.manifestOutputFile
            def appkey
            // cylan matappkey:Aqc1103156296  zhongxing matappkey:ATQ1JV694AKT
            if (project.hasProperty('oem') && oem != 'cylan') {
                appkey = "ATQ1JV694AKT"
            } else {
                appkey = "Aqc1103156296"
            }

            def newFileContents = manifestOutFile.getText('UTF-8').replace("MATAPPKEY", appkey)
            manifestOutFile.write(newFileContents, 'UTF-8')

        }
    }
}